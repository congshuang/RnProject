/** * Sample React Native App * https://github.com/facebook/react-native * @flow */import React, { Component } from 'react';import {    Platform,    StyleSheet,    Text,    View,    ScrollView,    Image,    TouchableOpacity,    ListView,    ToastAndroid} from 'react-native';import  Storage from '../Utils/storage';import  Util from '../Utils/util';import ModalDropdown from 'react-native-modal-dropdown';export default class Contacts extends Component<{}> {    constructor(props){        super(props);        this.state = {            id:this.props.navigation.state.params.id,            name:this.props.navigation.state.params.name,            text1: '',            text2: '',            text3: '',            userName:'',            empName:'',            dataArray:[]        };    }    static navigationOptions = ({navigation, screenProps}) => ({        // 这里面的属性和App.js的navigationOptions是一样的。        headerTitle: '督办详情',        gestureResponseDistance: {horizontal: 300},        //设置跳转页面左侧返回箭头后面的文字，默认是上一个页面的标题        headerBackTitle: null,        //顶部标题栏的样式        headerStyle: {            backgroundColor:'#0A66D4',            height:50        },        //顶部标题栏文字的样式        headerTitleStyle: {            color:'#fff',            fontSize: 19,            alignSelf: 'center',        },        //返回按钮的颜色        headerTintColor: 'white',        headerRight: (<View/>),        //设置顶部导航栏左边的视图        //设置顶部导航栏左边的视图  和 解决当有返回箭头时，文字不居中    });    render() {        return (            <View style={styles.container}>                <View style={[styles.item,{marginTop:10}]}>                    <View style={[styles.itemLeft]}>                        <Text style={styles.itemTextLeft}>                            办件名称                        </Text>                    </View>                    <View style={styles.itemRight}>                        <Text numberOfLines={1} style={styles.itemTextRight}>                            {this.state.name}                        </Text>                    </View>                </View>                <View style={styles.item}>                    <View style={[styles.itemLeft]}>                        <Text style={styles.itemTextLeft}>                            申请人                        </Text>                    </View>                    <View style={styles.itemRight}>                        <Text numberOfLines={1} style={styles.itemTextRight}>                            {this.state.userName}                        </Text>                    </View>                </View>                {/*<View style={styles.item}>                    <View style={[styles.itemLeft]}>                        <Text style={styles.itemTextLeft}>                            督办对象                        </Text>                    </View>                    <View style={styles.itemRight}>                        <ModalDropdown                            style={styles.dropdown}                            textStyle={styles.dropdown_text}                            dropdownStyle={styles.dropdown_dropdown}                            dropdownTextStyle={styles.dropdown_downtext}                            dropdownTextHighlightStyle={styles.dropdown_lighttext}                            options={this.state.dataArray}                                       defaultIndex={0}                                       defaultValue="请选择..."                                       onSelect={(idx, value) => this.setState({                                           text1:value                                       })}/>                    </View>                </View>*/}                <View style={styles.item}>                    <View style={[styles.itemLeft]}>                        <Text style={styles.itemTextLeft}>                            督办意见                        </Text>                    </View>                    <View style={styles.itemRight}>                        <ModalDropdown                            style={styles.dropdown}                            textStyle={styles.dropdown_text}                            dropdownStyle={styles.dropdown_dropdown}                            dropdownTextStyle={styles.dropdown_downtext}                            dropdownTextHighlightStyle={styles.dropdown_lighttext}                            options={['领导你好,麻烦请尽快处理', '时间紧急,请尽快处理','同意,尽快处理']}                            defaultIndex={0}                            defaultValue="请选择..."                            onSelect={(idx, value) => this.setState({                                text2:value                            })}/>                    </View>                </View>                <View style={styles.item}>                    <View style={[styles.itemLeft]}>                        <Text style={styles.itemTextLeft}>                            反馈期限                        </Text>                    </View>                    <View style={styles.itemRight}>                        <View style={styles.qwer}>                            <ModalDropdown                                style={styles.dropdown_1}                                textStyle={styles.dropdown_text}                                dropdownStyle={styles.dropdown_dropdown_1}                                dropdownTextStyle={styles.dropdown_downtext}                                dropdownTextHighlightStyle={styles.dropdown_lighttext}                                options={[1,2,3,4,5]}                                defaultIndex={0}                                defaultValue="请选择..."                                onSelect={(idx, value) => this.setState({                                    text3:value                                })}/>                        </View>                        <Text style={styles.itemText}>工作日</Text>                    </View>                </View>                <TouchableOpacity onPress={this._onPressButton.bind(this)} style={styles.touchOpacity}>                    <Text style={{color:"#fff",fontSize:18}}>提交</Text>                </TouchableOpacity>            </View>        );    }    _onPressButton(){        var _this = this;        let formData = {            content:this.state.text2,            flowId:this.state.id,            from:this.state.empName,            limit:this.state.text3,        }        Util.postContent("http://219.145.160.7:8180/chaseflow",formData,function (data) {            ToastAndroid.show('提交成功...', ToastAndroid.SHORT);            _this.props.navigation.state.params.callback();            _this.props.navigation.goBack(null);        },function (data) {            ToastAndroid.show('提交失败...', ToastAndroid.SHORT);        })    }    componentWillMount() {        var _this =this;        Storage.get("name").then((tags) =>{            _this.setState({                empName:tags            })        });        Storage.get("userName").then((tags) =>{            _this.setState({                userName:tags            })        });     /*   var array = [];        var id = this.state.id;        var path = "http://219.145.160.7:8180/flow/"+id+"/node/confirms";        Util.get(path,function (data) {            for(var i=0 ;i <data.length ; i++){                array.push(data[i].name)            }            _this.setState({                dataArray:array            });        },function (data) {            ToastAndroid.show('获取失败...', ToastAndroid.SHORT);        })*/    }    componentDidMount() {    }     }const styles = StyleSheet.create({    container: {        flex: 1,        backgroundColor: '#F5FCFF',        alignItems:'center',    },    item:{        width:Util.size.width,        height:50,        backgroundColor: '#fff',        flexDirection:'row',    },    itemLeft:{        width:Util.size.width/3,        height:49,        backgroundColor: '#fff',        borderRightWidth: Util.pixel,        borderRightColor:'#ccc',        alignItems:'center',        justifyContent:'center',        borderBottomWidth: Util.pixel,        borderBottomColor:'#ccc',    },    itemRight:{        width:Util.size.width/3*2,        height:49,        backgroundColor: '#fff',        alignItems:'center',        justifyContent:'center',        borderBottomWidth: Util.pixel,        borderBottomColor:'#ccc',        flexDirection:'row',    },    itemTextLeft:{        width:Util.size.width/3,        fontSize:17,        color:'#999999',        textAlign:'center'    },    itemTextRight:{        fontSize:17,        width:Util.size.width/3*2,        color:'#000',        textAlign:'center'    },    touchOpacity:{        width:(Util.size.width-60),        backgroundColor:'#196BE6',        borderRadius:20,        height:45,        marginTop:10,        alignItems:'center',        justifyContent:'center',    },    dropdown: {        width:Util.size.width/3*2-40,        height:35,        marginLeft:20,        backgroundColor:'rgba(0,0,0,0)',        borderRadius:17,        borderColor:'#196BE6',        borderStyle:'solid',        borderWidth:Util.pixel,    },    qwer:{        width:Util.size.width/3*2-80,    },    dropdown_1: {        alignSelf: 'flex-end',        width:Util.size.width/3*2-100,        height:35,        top: 1,        right: 20,        backgroundColor:'rgba(0,0,0,0)',        borderRadius:17,        borderColor:'#196BE6',        borderStyle:'solid',        borderWidth:Util.pixel,    },    dropdown_text: {        marginVertical: 5,        marginHorizontal: 6,        fontSize: 17,        color: '#000',        textAlign: 'center',        textAlignVertical: 'center',    },    dropdown_downtext: {        marginVertical: 5,        marginHorizontal: 6,        fontSize: 17,        color: '#00171b',        textAlign: 'center',        textAlignVertical: 'center',    },    dropdown_lighttext: {        marginVertical: 5,        marginHorizontal: 6,        fontSize: 17,        color: '#196be6',        textAlign: 'center',        textAlignVertical: 'center',    },    dropdown_dropdown: {        width:Util.size.width/3*2-40,        height: 200,        marginTop:10,        borderColor: '#646a71',        borderWidth:Util.pixel ,        borderRadius: 3,    },    dropdown_dropdown_1: {        width:Util.size.width/3*2-100,        height: 200,        marginTop:10,        borderColor: '#646a71',        borderWidth:Util.pixel ,        borderRadius: 3,    },    itemText:{        fontSize:17,        width:70,        color:'#000',        textAlign:'center'    }});