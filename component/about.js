import React, { Component } from 'react';import { AppRegistry,    StyleSheet,    Image,    Text,    TextInput,    ActivityIndicator,    TouchableOpacity,    AsyncStorage,    BackHandler,    ToastAndroid,    Button,    NativeModules,    Linking,    View} from 'react-native';import Util from '../Utils/util';import Storage  from '../Utils/storage';import Spinner from 'react-native-spinkit'import Modal from 'react-native-modalbox';import DeviceInfo from 'react-native-device-info';import RNFS from 'react-native-fs';export default class About extends Component<{}>{    constructor(props){        super(props);        let flag = this.props.navigation.state.params.flag;        let version = this.props.navigation.state.params.version;        this.state = {            title:"韩城政务",            subTitle:version,            isOpen: false,            isDisabled: false,            swipeToClose: true,            sliderValue: 0.3,            index: 0,            types: ['CircleFlip', 'Bounce', 'Wave', 'WanderingCubes', 'Pulse', 'ChasingDots', 'ThreeBounce', 'Circle', '9CubeGrid', 'WordPress', 'FadingCircle', 'FadingCircleAlt', 'Arc', 'ArcAlt'],            size: 70,            color: "#196be6",            isVisible: true,            progressNum:0,            total:0,            path:'',            text:'检测到新的版本,是否下载?',            isShow:false,            flag:flag        };    }    static navigationOptions = ({navigation, screenProps}) => ({        // 这里面的属性和App.js的navigationOptions是一样的。        headerTitle: '关于',        gestureResponseDistance: {horizontal: 300},        //设置跳转页面左侧返回箭头后面的文字，默认是上一个页面的标题        headerBackTitle: null,        //顶部标题栏的样式        headerStyle: {            backgroundColor:'#0A66D4',            height:50        },        //顶部标题栏文字的样式        headerTitleStyle: {            color:'#fff',            fontSize: 19,            alignSelf: 'center',        },        //返回按钮的颜色        headerTintColor: 'white',        headerRight: (<View/>),    });    render(){        return (            <View style={styles.container}>                <BackImage/>                <Modal style={styles.model} position={"center"} ref={"modal"} backdropOpacity={0} swipeToClose={false} backdropPressToClose={false}>                    <Spinner style={styles.spinner} isVisible={this.state.isVisible} size={this.state.size} type='Circle' color={this.state.color}/>                    <Text style={{fontWeight:'100',fontSize:17,marginTop:10}}>检测中...</Text>                </Modal>                <Modal style={styles.model} position={"center"} ref={"modal1"} backdropOpacity={0}>                    <Text style={{fontWeight:'100',fontSize:17}}>当前版本为最新的版本</Text>                </Modal>                <Modal style={styles.model} position={"center"} ref={"modal2"} backdropOpacity={0} swipeToClose={false} backdropPressToClose={false}>                    {                        this.state.isShow?                            (<View style={styles.top1}>                                <Spinner style={styles.spinner} isVisible={this.state.isVisible} size={this.state.size} type='Circle' color={this.state.color}/>                                <Text style={{fontWeight:'100',fontSize:17,marginTop:10}}>{this.state.progressNum}</Text>                            </View>):                            (<View>                                <View style={styles.top1}>                                    <Text style={{fontWeight:'100',fontSize:17}}>{this.state.text}</Text>                                </View>                                <View style={styles.bottom1}>                                    <TouchableOpacity onPress={this.onNoPress.bind(this)} style={styles.btn}>                                        <Text style={{fontWeight:'100',fontSize:17}}>取消</Text>                                    </TouchableOpacity>                                    <TouchableOpacity onPress={this.onYesPress.bind(this)} style={[styles.btn,{marginLeft:Util.size.width-280}]}>                                        <Text style={{fontWeight:'100',fontSize:17}}>确定</Text>                                    </TouchableOpacity>                                </View>                            </View>)                    }                </Modal>                <View style={styles.container_out} >                    <Image source={require('../state/logo.png')} style={styles.logo} resizeMode='contain'/>                    <Text style={styles.titletext}>                        {this.state.title}                    </Text>                    <Text style={styles.subtext}>                        Version {this.state.subTitle}                    </Text>                </View>                <View style={styles.top}>                    <TouchableOpacity onPress={this._onPressButton.bind(this)} style={styles.touchOpacity}>                        <Text style={{color:"#fff",fontSize:15}}>检测新的版本</Text>                    </TouchableOpacity>                </View>                <View style={styles.bottom}>                    <Text style={styles.text}>                        韩城市人民政府 版权所有                    </Text>                    <Text style={styles.text}>                        Copyright  &copy; 1997-2017  All Rights Reserved.                    </Text>                </View>            </View>        );    }    onNoPress(){        this.refs.modal2.close()    }    downloadFile() {        let url = 'http://219.145.160.7:81/hczw.apk' ;        Linking.openURL(url) .catch((err)=>{ alert(1) });        this.refs.modal2.close();    }    onYesPress(){        this.downloadFile();    }    _onPressButton(){        if(this.state.flag){            this.refs.modal2.open();        }else{            this.refs.modal1.open();        }    }    _onPressButton1(){        this.refs.modal.close()    }    componentDidMount() {    }    componentWillMount() {    }}class BackImage extends Component{    render(){        return(            <Image style={styles.backImage} resizeMode="stretch"                   source={require('../state/login.png')}/>        );    }}const styles = StyleSheet.create({    container:{        flex:1,        backgroundColor:'#fff'    },    spinner:{    },    model:{        width:Util.size.width-150,        height:150,        flexDirection:'column',        justifyContent:'center',        alignItems:'center',        backgroundColor:'#fff',        borderRadius:10,    },    logo:{        height:50,    },    backImage:{        flex:1,        alignItems:'center',        justifyContent:'center',        position:'absolute',        //不加这句，就是按照屏幕高度自适应        //加上这几，就是按照屏幕自适应        //resizeMode:Image.resizeMode.contain,        //祛除内部元素的白色背景    },    top:{        flex:1,        flexDirection:'column',        justifyContent:'center',        alignItems:'center',    },    top1:{        flex:3,        flexDirection:'column',        justifyContent:'center',        alignItems:'center',    },    bottom:{        flex:1,        flexDirection:'column',        justifyContent:'flex-end',        alignItems:'center',        paddingBottom:10    },    bottom1:{        flex:1,        flexDirection:'row',        justifyContent:'center',        alignItems:'flex-end',        paddingBottom:10,        borderTopWidth: Util.pixel,        borderTopColor:'#ccc',    },    btn:{        justifyContent:'center',        alignItems:'center',        backgroundColor:'#fff'    },    container_out:{        flex:3,        flexDirection:'column',        justifyContent:'center',        alignItems:'center',    },    titletext:{        color:'#000',        fontSize:18,        fontWeight:'bold',        marginTop:10    },    text:{        color:'#646a71',        fontSize:15,        fontWeight:'100'    },    subtext:{        color:'#000',        fontSize:15,        fontWeight:'100'    },    touchOpacity:{        width:(Util.size.width-60),        backgroundColor:'#196BE6',        borderRadius:5,        height:45,        marginTop:80,        alignItems:'center',        justifyContent:'center',    },});