/** * Sample React Native App * https://github.com/facebook/react-native * @flow */import React, { Component } from 'react';import {    Platform,    StyleSheet,    Text,    View,    ToolbarAndroid,    ScrollView,    ListView,    Image,    TouchableOpacity} from 'react-native';import TWebView from '../view/webviews'import  Util from '../Utils/util';const nearByURL = 'http://219.145.160.7:8381/index.html';import Header from './Header';{/**/}export default class Chatlist extends Component<{}> {    constructor(props){        super(props);        let ds = new ListView.DataSource({rowHasChanged: (r1, r2) => r1 !== r2});        let socket = this.props.navigation.state.params.socket;        this.state = {            dataSource: ds.cloneWithRows([]),            socket:socket        };    }    static navigationOptions = ({navigation, screenProps}) => ({        // 这里面的属性和App.js的navigationOptions是一样的。        headerTitle: '通讯录',        gestureResponseDistance: {horizontal: 300},        //设置跳转页面左侧返回箭头后面的文字，默认是上一个页面的标题        headerBackTitle: null,        //顶部标题栏的样式        headerStyle: {            backgroundColor:'#0A66D4',            height:50        },        //顶部标题栏文字的样式        headerTitleStyle: {            color:'#fff',            fontSize: 19,            alignSelf: 'center',        },        //返回按钮的颜色        headerTintColor: 'white',        headerRight: (<View/>)        //设置顶部导航栏左边的视图        //设置顶部导航栏左边的视图  和 解决当有返回箭头时，文字不居中    });    render() {        return (            <View style={styles.container}>                <ScrollView style={styles.container}>                    <ListView dataSource={this.state.dataSource} enableEmptySections={true}                              renderRow={(rowData) =>                                  (                                      <TouchableOpacity style={[styles.item]} onPress={this._onOpenItem.bind(this,'ListChat',rowData.list)}>                                          <View style={styles.back}><Image source={require('../state/img1.png')} style={styles.image} resizeMode='contain'/></View>                                          <Text style={styles.text}>{rowData.groupname}</Text>                                          <Image source={require('../state/yjt.png')} style={styles.img} resizeMode='contain'/>                                      </TouchableOpacity>                                  )                              }/>                </ScrollView>            </View>        );    }    _onOpenItem(demo,list){        this.props.navigation.navigate(demo,{            list:list,            socket:this.state.socket        });    }    componentDidMount() {        this._fetchData();    }    _fetchData(){        let self = this;        let tag = "http://219.145.160.7:8381/getusers";        let ds = new ListView.DataSource({rowHasChanged: (r1, r2) => r1 !== r2});            Util.getbody(tag, function(data){                let obj = data.data.friend;                self.setState({                    dataSource: ds.cloneWithRows(obj),                });            }, function(err){                /*alert(JSON.stringify(err))*/                /*alert("服务异常,正在紧急修复,请耐心等待")*/            });    }}const styles = StyleSheet.create({    container: {        flex: 1,        backgroundColor: '#F5FCFF',    },    item:{        width:Util.size.width,        height:50,        paddingLeft:10,        borderBottomWidth: Util.pixel,        borderBottomColor:'#ccc',        flexDirection:'row',        alignItems:'center'    },    image:{        width:30,        height:30,    },    back:{        width:40,        height:40,        marginRight:10,        backgroundColor:'#196be6',        borderRadius:5,        alignItems:'center',        justifyContent:'center'    },    img:{        width:20,        height:20,        marginRight:10    },    text:{        fontSize:18,        fontWeight:'100',        width:Util.size.width-90    }});